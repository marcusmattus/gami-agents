FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY shared/ ./shared/
COPY supervisor_agent/ ./supervisor_agent/

ENV QUEST_AGENT_URL=http://quest_generation_agent:8001 \
    ECONOMY_AGENT_URL=http://economy_management_agent:8002 \
    SECURITY_AGENT_URL=http://security_agent:8003 \
    MCP_TRANSPORT=sse \
    SUPERVISOR_HOST=0.0.0.0 \
    SUPERVISOR_PORT=8800 \
    SUPERVISOR_HTTP_PATH=mcp

WORKDIR /app/supervisor_agent

EXPOSE 8800

CMD ["python", "main.py"]
